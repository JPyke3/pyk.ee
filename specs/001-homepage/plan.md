# Implementation Plan: Homepage / Landing Page

**Branch**: `001-homepage` | **Date**: 2025-12-03 | **Spec**: [spec.md](./spec.md)
**Constitution Reference**: v1.1.0

## Summary

Build the foundational homepage for pyk.ee establishing the Portal/Aperture Science terminal aesthetic with an interactive pixel art pike mascot that tracks mouse movement as an easter egg, CRT-style scanlines background, and command-prompt styled CTAs. Vanilla HTML/CSS/JS only, zero build step, opens directly via `index.html`.

## Technical Context

**Language/Version**: HTML5, CSS3, ES6+ JavaScript (no transpilation)
**Primary Dependencies**: None (vanilla implementation per Article II)
**Storage**: N/A (static files only)
**Testing**: Manual browser testing (Chrome, Firefox, Safari, Edge)
**Target Platform**: Modern browsers, desktop-first with mobile support
**Project Type**: Static website (single page for this feature)
**Performance Goals**: 120fps logo tracking, <1s first contentful paint
**Constraints**: <500KB page weight, zero build step, max 3 nesting levels
**Scale/Scope**: Single homepage, foundation for 5 future pages

## Constitution Check

*GATE: All articles verified compliant before implementation.*

| Article | Requirement | Plan Compliance |
|---------|-------------|-----------------|
| I | Zero-build portability | Opens via `file://index.html`, no build step |
| II | Minimal dependencies | Vanilla HTML/CSS/JS, no libraries |
| III | One-file-per-type | 1 HTML + 1 CSS + 1 JS + content folders |
| IV | Never-nesting | Max 3 levels enforced in JS/CSS |
| V | Content-data separation | JSON placeholders for future content |
| VI | Pixel art aesthetic | Pixel art pike mascot, Portal palette, JetBrains Mono |
| VII | Anti-corporate voice | Casual copy locked in spec |
| VIII | Desktop-first, mobile-functional | 768px breakpoint, desktop default |
| X | Simplicity gate | CSS-first approach, JS only where needed |
| XI | Strict version control | Atomic commits throughout |

**No violations requiring justification.**

## Project Structure

### Documentation (this feature)

```text
specs/001-homepage/
├── spec.md              # Feature specification (complete)
├── plan.md              # This file
└── tasks.md             # Generated by /speckit.tasks
```

### Source Code (repository root)

```text
/
├── index.html              # Homepage markup
├── css/
│   └── homepage.css        # Homepage styles (global foundation)
├── js/
│   └── homepage.js         # Logo tracking, particle canvas
├── fonts/
│   └── JetBrainsMono/      # Self-hosted font files
│       ├── JetBrainsMono-Regular.woff2
│       └── JetBrainsMono-Bold.woff2
└── content/
    ├── projects.json       # Placeholder for future project data
    └── posts/
        └── .gitkeep        # Placeholder for future blog posts
```

**Structure Decision**: Flat structure with type-based subdirectories (`css/`, `js/`, `fonts/`, `content/`). Keeps root clean while allowing one file per type per feature. Future features add to existing directories.

## Locked Design Decisions

From spec clarifications:

| Decision | Value |
|----------|-------|
| Hero copy | "I build things for the web and tinker with Linux." |
| GitHub URL | https://github.com/JPyke3 |
| Primary amber | #FF9900 |
| Secondary amber | #FFB000 |
| Background | #000000 (pure black) |
| Font stack | JetBrains Mono, Fira Code, Courier New, monospace |
| Logo style | Pixel art pike fish mascot ("Pykee") |
| Logo size | 32x32 or 64x64 pixel grid |
| Logo tracking | Noticeable easter egg (discovered within seconds) |
| Primary brand name | "Pykee" (displayed as main heading) |
| Background | CRT scanlines + minimal ambient motion |

## Technical Design

### 1. Mouse-Tracking Pixel Art Mascot

**Approach**: Vanilla JavaScript with `requestAnimationFrame` for smooth 120fps animation.

**Implementation Pattern**:
```
┌─────────────────────────────────────────────────────────┐
│  mousemove listener → stores cursor X/Y coordinates     │
│                              ↓                          │
│  requestAnimationFrame loop → reads stored coordinates  │
│                              ↓                          │
│  calculates offset → applies CSS transform to mascot    │
└─────────────────────────────────────────────────────────┘
```

**Key Constraints**:
- Decouple input events from render loop (no direct DOM updates in mousemove)
- Target 120fps, minimum 60fps
- Use CSS transforms only (no layout thrashing)
- Graceful degradation: static mascot when JS disabled
- Mobile: static state (no touch equivalent)

**Mascot Structure**:
- Pixel art pike rendered as `<img>` or inline SVG with `aria-label` for accessibility
- 64x64 display size (scaled from 32x32 or 64x64 source for crisp pixels)
- Transform applied to entire mascot based on cursor-to-mascot vector
- CSS `image-rendering: pixelated` for crisp scaling

### 2. Terminal Background Layers

**Layer Stack** (back to front):

```
┌─────────────────────────────────────────┐
│ 4. Content (text, navigation, CTAs)     │
├─────────────────────────────────────────┤
│ 3. Particle canvas (JS, 30-50 particles)│
├─────────────────────────────────────────┤
│ 2. Ambient glow (CSS radial gradient)   │
├─────────────────────────────────────────┤
│ 1. Scanlines (CSS pseudo-element)       │
├─────────────────────────────────────────┤
│ 0. Base black background                │
└─────────────────────────────────────────┘
```

**Scanlines Implementation**:
```css
/* Pseudo-element with repeating gradient */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 2px,
    rgba(0, 0, 0, 0.3) 2px,
    rgba(0, 0, 0, 0.3) 4px
  );
  pointer-events: none;
  z-index: 1;
}
```

**Particle Canvas**:
- Maximum 30-50 amber particles
- Slow drift movement (0.1-0.3 px/frame)
- Responds to `prefers-reduced-motion`
- Canvas resizes with viewport

### 3. CSS Custom Properties

```css
:root {
  /* Colours - Portal/Aperture palette */
  --color-amber: #FF9900;
  --color-amber-light: #FFB000;
  --color-bg: #000000;
  --color-bg-elevated: #0a0a0a;

  /* Typography */
  --font-mono: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
  --font-size-base: 1rem;
  --font-size-lg: 1.25rem;
  --font-size-xl: 1.5rem;
  --font-size-hero: 2.5rem;

  /* Spacing */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 2rem;
  --space-xl: 4rem;

  /* Layout */
  --max-width: 60rem;
  --nav-height: 3.5rem;
}
```

### 4. Navigation Structure

**Markup**:
```html
<nav class="main-nav" role="navigation" aria-label="Main">
  <ul class="nav-list">
    <li><a href="/" class="nav-link" aria-current="page">Home</a></li>
    <li><a href="/projects.html" class="nav-link">Projects</a></li>
    <li><a href="/blog.html" class="nav-link">Blog</a></li>
    <li><a href="/about.html" class="nav-link">About</a></li>
    <li><a href="/contact.html" class="nav-link">Contact</a></li>
  </ul>
</nav>
```

**Styling**:
- Horizontal bar, centred
- Amber text on transparent/dark
- Subtle glow on hover (`text-shadow`)
- Mobile: horizontal if fits, otherwise hamburger

### 5. Command-Prompt CTAs

**Concept**: Style links to look like terminal commands while remaining obviously clickable.

**Structure**:
```html
<a href="/contact.html" class="cta cta-primary">
  <span class="cta-prompt" aria-hidden="true">&gt; </span>
  <span class="cta-text">contact</span>
  <span class="cta-cursor" aria-hidden="true">_</span>
</a>
```

**Styling**:
- Blinking cursor via CSS animation
- Underline appears on hover
- Minimum 44x44px touch target
- Screen reader sees "contact" only

### 6. Font Loading Strategy

**Self-hosted JetBrains Mono**:

```css
@font-face {
  font-family: 'JetBrains Mono';
  src: url('/fonts/JetBrainsMono/JetBrainsMono-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono';
  src: url('/fonts/JetBrainsMono/JetBrainsMono-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}
```

**Fallback Chain**: JetBrains Mono → Fira Code → Courier New → monospace

### 7. Responsive Strategy

**Breakpoints**:
- Desktop: >= 768px (default styles)
- Mobile: < 768px (overrides via `max-width` media query)

**Desktop-First Approach**:
```css
/* Default: desktop */
.hero { padding: var(--space-xl); }

/* Mobile override */
@media (max-width: 767px) {
  .hero { padding: var(--space-lg); }
}
```

**Scaling Units**:
- `rem` for typography and spacing
- `%` or `vw/vh` for layout dimensions
- `px` only for borders, shadows, micro-spacing

### 8. JavaScript Constraints

Per constitution and coding preferences:

| Constraint | Enforcement |
|------------|-------------|
| No classes | Functional patterns only |
| Classic functions | `function doThing() {}` not arrows |
| No modern fluff | Avoid destructuring, spread, template literals |
| Max 3 nesting levels | Early returns, guard clauses, extract helpers |
| No build step | Vanilla JS, native ES modules if needed |
| Comments | Explain WHY, not WHAT |

**Example Pattern**:
```javascript
function initLogoTracking() {
  var logo = document.getElementById('logo');
  if (!logo) return;  // Guard clause

  var mouseX = 0;
  var mouseY = 0;

  document.addEventListener('mousemove', function(e) {
    mouseX = e.clientX;
    mouseY = e.clientY;
  });

  function animate() {
    updateLogoPosition(logo, mouseX, mouseY);
    requestAnimationFrame(animate);
  }

  requestAnimationFrame(animate);
}
```

### 9. Accessibility Baseline

| Requirement | Implementation |
|-------------|----------------|
| Semantic HTML | `nav`, `main`, `header`, `footer` |
| Colour contrast | Amber on black passes WCAG AA |
| Focus states | Visible outline on all interactive elements |
| Keyboard nav | Tab order logical, skip links if needed |
| Screen reader | `aria-label` on decorative ASCII art |
| Reduced motion | `prefers-reduced-motion` disables animations |

### 10. Performance Targets

| Metric | Target |
|--------|--------|
| First contentful paint | < 1 second |
| Logo tracking | 120fps target, 60fps minimum |
| Layout shift | Zero after load |
| Page weight | < 200KB ideal, < 500KB max |
| External requests | Zero (self-hosted fonts) |

## Frontend-Design Skill Usage

Invoke the `frontend-design` skill when implementing:

1. **Pike Mascot Design** — Create the pixel art pike fish mascot (32x32 or 64x64, cute/approachable)
2. **Terminal Background** — Scanlines, glow, particle aesthetics
3. **Command-Prompt CTAs** — Terminal-style interactive elements
4. **Overall Composition** — Visual hierarchy, spacing, Portal theme execution

The skill ensures distinctive, non-generic aesthetics aligned with the Portal/Aperture Science terminal theme.

## Implementation Order

| Phase | Task | Dependencies |
|-------|------|--------------|
| 1 | HTML structure — semantic markup, all sections | None |
| 2 | CSS foundation — custom properties, typography, colours | Phase 1 |
| 3 | Navigation styling — desktop layout | Phase 2 |
| 4 | Hero section — mascot placeholder, copy, CTAs | Phase 3 |
| 5 | Background effects — scanlines, glow (CSS only) | Phase 2 |
| 6 | Pike mascot design — pixel art creation (32x32/64x64) | Phase 4 |
| 7 | Mouse tracking JS — smooth animation loop | Phase 6 |
| 8 | Particle canvas — ambient background | Phase 5 |
| 9 | CTA styling — command-prompt effect | Phase 4 |
| 10 | Responsive pass — mobile breakpoint | Phase 1-9 |
| 11 | Accessibility audit — keyboard, contrast, ARIA | Phase 10 |
| 12 | Performance audit — weight, fps, Lighthouse | Phase 11 |
| 13 | Favicon — generate from pike mascot | Phase 6 |

**Git Commits**: Atomic commits after each phase (per Article XI).

## Out of Scope

- Blog rendering system (feature 002-blog)
- Project listing logic (feature 003-projects)
- Contact form functionality (feature 005-contact)
- About page content (feature 004-about)
- WebAssembly showcase (feature 006-wasm-demo)

## Risk Mitigation

| Risk | Mitigation |
|------|------------|
| Logo tracking performance | Use `requestAnimationFrame`, avoid layout thrashing |
| Font loading delay | `font-display: swap`, system fallback |
| Canvas performance on mobile | Reduce particle count, skip on `prefers-reduced-motion` |
| Browser compatibility | Target modern browsers, test on Safari |

## Suggested Commit Sequence

1. `feat: add HTML structure with semantic elements`
2. `feat: add CSS foundation with Portal colour palette`
3. `feat: implement navigation with hover glow`
4. `feat: add hero section with Pykee branding`
5. `style: add CRT scanlines background effect`
6. `feat: create pixel art pike mascot`
7. `feat: add mouse-tracking to pike mascot`
8. `feat: add ambient particle canvas`
9. `style: add command-prompt CTA styling`
10. `fix: add responsive mobile breakpoint`
11. `fix: accessibility improvements (ARIA, focus states)`
12. `feat: add favicon from pike mascot`
13. `chore: performance optimizations`
